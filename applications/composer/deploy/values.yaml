harness:
  database: { auto: true, type: postgres, size: 10Gi }
  dependencies:
    build: [cloudharness-frontend-build, cloudharness-django]
    soft: [argo]
    hard: [accounts]
  deployment:
    auto: true
    port: 80
    volume:
      mountpath: /usr/src/app/persistent
      name: composer-data
      auto: true
      size: 5Gi
      usenfs: false
  secured: false
  service: { auto: true, port: 80 }
  subdomain: www
  uri_role_mapping:
    - require-any-role: true
      roles:
        [
          "composer:composer-administrator",
          "composer:composer-manager",
          "composer:composer-user",
        ]
      uri: /*
  livenessProbe:
    path: /admin/login/
    initialDelaySeconds: 300
    periodSeconds: 30
    failureThreshold: 3
  readinessProbe:
    path: /admin/login/
    initialDelaySeconds: 300
    periodSeconds: 30
    failureThreshold: 3
  resources:
    requests:
      cpu: "1800m"
      memory: "1536Mi"
    limits:
      cpu: "1800m"
      memory: "2048Mi"
  envmap:
    PRODUCTION: True
